<div id="collection-details" layout="column">
    
    <md-toolbar md-scroll-shrink class="md-primary" flex>
        <div class="md-toolbar-tools" layout="row">
            <md-button ng-class="['md-icon-button', {'md-accent': mode === 'edit'}]" ng-hide="mode === 'add'" ng-click="close()">
                <md-icon>clear</md-icon>
            </md-button>
            <div flex></div>
            <md-button class='md-accent' ng-hide="mode !== 'edit'" ng-click="save()">
                save
            </md-button>
        </div>
        
        <div class="text-content title-container" ng-hide="mode === 'edit'">
            <label>Collection</label>
            <h2 flex >{{ collection.name }}</h2>
        </div>
        <div class='text-content'>
            <md-input-container ng-hide="mode !== 'edit'" class='md-accent'>
                <label>Collection</label>
                <input ng-model="collection.name">
            </md-input-container>
        </div>
        
        <md-subheader class="md-no-sticky" ng-hide="mode === 'add'">Discs</md-subheader>

        <md-button class="absolute-edit md-fab md-secondary" ng-hide="mode !== 'list'" ng-click="edit()">
            <md-icon >edit</md-icon>
        </md-button>
    </md-toolbar>

    <md-content class="list-container" ng-if="mode !== 'add'" flex>
        <md-card>
            <md-list>
                <md-list-item class="md-no-proxy" class="md-1-line" ng-repeat="disc in collection.discs">
                    <div class="md-list-item-text" flex>
                        <h4>{{disc.name}}</h3>
                    </div>
                    <md-menu ng-if="mode === 'edit'">
                        <md-button class="md-icon-button md-accent" ng-click="$mdMenu.open($event)">
                            <md-icon md-menu-origin >more_vert</md-icon>
                        </md-button>
                        <md-menu-content width="4">
                            <md-menu-item>
                                <md-button ng-click="remove(disc)">
                                    <md-icon md-menu-align-target>clear</md-icon>
                                    Remove
                                </md-button>
                            </md-menu-item>
                        </md-menu-content>  
                    </md-menu>
                    <md-divider ng-if="!$last"></md-divider>
                </md-list-item>
            </md-list>
        </md-card>
    </md-content>

    <md-button class="fixed-add md-fab md-secondary" ng-hide="mode !== 'list'" ng-click="mode = 'add'">
        <md-icon >add</md-icon>
    </md-button>

    <md-content class="add-disc-container" ng-if="mode === 'add'" ng-controller="addDiscController">
        <md-card>
            <md-toolbar md-scroll-shrink class="md-accent" flex>
                <div class="md-toolbar-tools">
                    <h2 flex md-truncate>Select a disc to add</h2>
                </div>
            </md-toolbar>
            
            <form>
                <md-autocomplete md-autofocus md-selected-item="selectedItem" md-search-text="searchText" md-items="item in query(searchText)" md-item-text="item.name", md-no-cache="true" placeholder="Type to search for a disc">
                    <md-item-template>
                        <span md-highlight-text="searchText">{{item.name}}</span>
                    </md-item-template>
                    <div ng-messages="autocompleteForm.autocomplete.$error">
                        <div ng-message="required">This field is required</div>
                    </div>
                </md-autocomplete>
            

                <md-card-actions layout="row" layout-align="end center">
                    <md-button class="md-raised" ng-click="cancel()">Cancel</md-button>
                    <md-button class="md-raised md-primary" ng-submit ng-click="add()">Add</md-button>
                </md-card-actions>
            </form>
        </md-card>
    </md-content>
</div>
